define(["jquery","core/ajax","core/notification"],function(a,b,c){var d=function(b,c,d){this._region=a(b),this._courseid=c,this._israted=d,this._region.find(".star").unbind().on("click","img",this._setUserChoice.bind(this)),this._region.find("#block_rate_course-rerate").on("click",this._rerateCourse.bind(this))};return d.prototype._setUserChoice=function(d){var e=a(d.target).parent(),f=e.data("value");""!=f&&b.call([{methodname:"block_rate_course_set_rating",args:{courseid:this._courseid,rating:f},done:function(a){return a===!0&&(this._region.find("#block_rate_course-myrating-area").removeClass("hidden"),this._region.find("#block_rate_course-stars-area").addClass("hidden"),this._region.find("#block_rate_course-myrating").text(f)),!0}.bind(this),fail:c.exception}])},d.prototype._rerateCourse=function(){this._region.find("#block_rate_course-stars-area").removeClass("hidden")},d});